{"version":3,"sources":["webpack:///./src/CountDown/index.js","webpack:///./src/CountDown/index.mdx"],"names":["_react","_interopRequireWildcard","__webpack_require__","fixedZero","val","concat","initTime","props","lastTime","targetTime","Object","prototype","toString","call","target","getTime","Date","e","Error","CountDown","_this","_classCallCheck2","default","this","_possibleConstructorReturn2","_getPrototypeOf2","timer","interval","defaultFormat","time","h","Math","floor","m","s","createElement","tick","onEnd","state","setTimeout","clearTimeout","setState","prevProps","_this$props","_this$props$format","format","rest","_objectWithoutProperties2","result","nextProps","preState","Component","_interopRequireDefault","_tag","_docz","_","MDXContent","layout","components","MDXTag","name","id","Playground","__codesandbox","__position","__code","__scope","React"],"mappings":"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","file":"static/js/src-count-down-index.ab21143b.js","sourcesContent":["import React, { Component } from 'react';\n\nfunction fixedZero(val) {\n  return val * 1 < 10 ? `0${val}` : val;\n}\nconst initTime = props => {\n  let lastTime = 0;\n  let targetTime = 0;\n  try {\n    if (Object.prototype.toString.call(props.target) === '[object Date]') {\n      targetTime = props.target.getTime();\n    } else {\n      targetTime = new Date(props.target).getTime();\n    }\n  } catch (e) {\n    throw new Error('invalid target prop', e);\n  }\n\n  lastTime = targetTime - new Date().getTime();\n  return {\n    lastTime: lastTime < 0 ? 0 : lastTime,\n  };\n};\n\nclass CountDown extends Component {\n  timer = 0;\n\n  interval = 1000;\n\n  constructor(props) {\n    super(props);\n    const { lastTime } = initTime(props);\n    this.state = {\n      lastTime,\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps, preState) {\n    const { lastTime } = initTime(nextProps);\n    if (preState.lastTime !== lastTime) {\n      return {\n        lastTime,\n      };\n    }\n    return null;\n  }\n\n  componentDidMount() {\n    this.tick();\n  }\n\n  componentDidUpdate(prevProps) {\n    const { target } = this.props;\n    if (target !== prevProps.target) {\n      clearTimeout(this.timer);\n      this.tick();\n    }\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.timer);\n  }\n\n  // defaultFormat = time => (\n  //  <span>{moment(time).format('hh:mm:ss')}</span>\n  // );\n  defaultFormat = time => {\n    const hours = 60 * 60 * 1000;\n    const minutes = 60 * 1000;\n\n    const h = Math.floor(time / hours);\n    const m = Math.floor((time - h * hours) / minutes);\n    const s = Math.floor((time - h * hours - m * minutes) / 1000);\n    return (\n      <span>\n        {fixedZero(h)}:{fixedZero(m)}:{fixedZero(s)}\n      </span>\n    );\n  };\n\n  tick = () => {\n    const { onEnd } = this.props;\n    let { lastTime } = this.state;\n\n    this.timer = setTimeout(() => {\n      if (lastTime < this.interval) {\n        clearTimeout(this.timer);\n        this.setState(\n          {\n            lastTime: 0,\n          },\n          () => {\n            if (onEnd) {\n              onEnd();\n            }\n          }\n        );\n      } else {\n        lastTime -= this.interval;\n        this.setState(\n          {\n            lastTime,\n          },\n          () => {\n            this.tick();\n          }\n        );\n      }\n    }, this.interval);\n  };\n\n  render() {\n    const { format = this.defaultFormat, onEnd, ...rest } = this.props;\n    const { lastTime } = this.state;\n    const result = format(lastTime);\n\n    return <span {...rest}>{result}</span>;\n  }\n}\n\nexport default CountDown;\n","\n  import React from 'react'\n  import { MDXTag } from '@mdx-js/tag'\n  import { Playground } from 'docz';\nimport CountDown from '.';\n\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.layout = null\n  }\n  render() {\n    const { components, ...props } = this.props\n\n    return <MDXTag\n             name=\"wrapper\"\n             \n             components={components}><MDXTag name=\"h2\" components={components} props={{\"id\":\"count-down\"}}>{`Count Down`}</MDXTag>\n\n<Playground __codesandbox={`N4IgZglgNgpgziAXKCA7AJjAHgOgBYAuAtlEqAMYD2qBMNSIAPOhAG4AEE6AvADogAnSpQL8AfIwD0LVmJABfADQg0mXACsEyEFRp0CDSQCojvVO3YAVPBDjsAwpUwBlAIYYARpSzs8rux4wdOyuAK4ElESuBBDkrlBQAJ7sAOZ0MALRMOjsoXBoKWYWAAZUmHDu6F5YGcU47ACSYOyJlKEA5AIw7OShAhBtdniUAO7sBH4Evq4ADjPp6IotbT3uRT14MOQA1uxtU20C7OiU5EMZMIi-BAQzcIiSkikQE6EeOFREkqiUrGiJkjK8Eq1QyZnWTWWoXY2Hm_To5G67mScAIAlCKRSsDsIxeeHGNjsFU83iWM1g_m6mVsSPMtjgoRg62oqTxb3qiAAlGYjJIzBAiDNKAIpgAlGCuchTMBCIjsToSqXtADc_MFwrFioIABEAPIAWXYMsi8q6koIAFoTkQVWqhSKHJEhah9EbZfKcJJsK5BbBbagzOLzXr9TguhgMgAKdbMNhidYWRh4ADMYkc6pdNE46pF2XYuImPScwJJNQEiCkKfj5gs7EYMzEkYaUyiyRdedc6BYMWo8XYMyEd3GlFSMCmL3Y4cw_VQKXzMASnKkDYTdfTztdkmriekccUZhOvSI-hwaQIAFFYMeaAAhRINdCRzrCAjtbmoTnKhTKb2-mA4TQyB0ahaHoRAVBzKZHFCGhtVGcxjTldpPTgARyEkaDYPg_0BXtTVzTdE0FXNdo7Q1dhgHYTQfHkQikIAARgIgRAGVBAWFGBSIDVBdFRY5TgAL2cAhEmxdhuAo9YogEZ5UCudoAAZ2GTGYsHafcaxmTsWFneSABZVPYAA2VT1PWMAQIAMR9aBEnk_hnEORFHUwdgAAUhH4JZmJ-OAtMRMyawsmhnAgATLnYABGPSNPkcEeOoPiAEE5nE9hI0o8gbCgdBw3YeROXEsR0pjGR2FRUSYG4YBDyEkTsXkbda2ALLoFy4IADIOvGRJ5koZpWpyvLuBG-UwBgqVWPadgAH4Nja8NI0Kq5Bva1A4prKQZGrd8zFhcjMDAMIoCmJaipKzaUpXGtEyDKUcEszIUmvAgmtrNc2iwkZzAIVwZLHaqXTGbUsiW08x0sAUYDOgBqZSAE4FKRpHaK3VcpDuggHqel6mqkK6drMb8QFQ9DMJ1eDJFUbAAK0CgQP0BhcPIzGlko9dqFdWjENNLV_TMcaeJ7BCIBqdAAC0MkoSNWHiQrgHWLoCD6cxZagdgjCiusoqUubigUgASYA1fkYp2CuNXVXWsxePHVAXkh480oHSgh24YqFZrWApigfwCEd7oJIUq2LG98Y_rPAO0uD9Y0WST33ogZpI11Dx1C2LGXYiET5hwCJhJnFIPniKBIxdu484jsdCpGiT2gAbUoNOM_YEHaAAXTfSSbtrX7_v9qHncHOBK_78GB-PJaQ9rWiFzgboE_e8P-6jiSgdb0Hy5Hvuz05ceA6n1cNosWi4gILL0pgeXVwmIQxnX88BCEAQnzQNWuGXs9-0HdSYU_dYNrrF9qiVen8IaDwtOwdebdoZ70jlDQ-NYlYq27u9YBE8IroKjowdgutcHm3YFgqGGkT5W3kFbG2wC7Dkzgt9GEWBQLoGoU6TmWZF4xGPEcIOFCaxoFoAINWaVIrIx4RYW26IpTCjLsPa-PcGRwmka7OA_8e62wooQv2UdaISTQA7BBW8VHvQmLYHAqIshpUXmgzRxCj7T0ATWMxMRyCjh1BkNg2RhJZEepEDySjIwugYb4u4ZIuieNoLI96ajKJEKdtozg9sMH-OwAQIJyjp4WCTulAcMAwn_hid0AAhKNfJESl7IIEOYSxS98kkKXuQo-q5ynmFQKEBIdj4piJYZmHUXB9SfQIGdKpxjt6xG2Igk-HSiwZn0NqLgABVGY6BN5dFYKk0pnTUB8UojvMc-U0rDJwFvdJnBk47KmEUiS2TVnD1HrvVBS9yAUgEAHfYkYDkcIyIYpe7zRnjJngAyZnwNw0AAOrQCgHM1AzEYIDPWT0J5LzwhvMJHnKGAgvn2IsI8Y4MAjqtIIJZYUUQpgSQ-edaMNZsV1j8u4MQwBmIvTeVDPeFkBDEqfHgPAiAiBEEQHAOAb55BSBpagJq2KvmHWOgSol0R9mD3dvcjZfFhh9DsBJIySlNYao1jrJGxy1FEDQOEeAaVtWa2EXqyZSqpj4gkvqaIeAcBgCgMIF-ZLJC-EOGk1cBq0r2omE6l1UimVO0gfiTWKqBDKPYB6w1LTaDetUYlKYar2D-sdc611kYQ3dDDTqyNdhIFyk1nG410aPUWoUl8iwTSLpL2pVpUVq53rAEgGLSWQhIx4E5PIZAbbsgdulkQHtfbRYDqlpGZRx8l7CsbW9dgGLRHjFGWlM6CqqlRL2Kgc8GA9mkpRUc1cYdonWNifslFjiYBLosD8zhaV54YNeWuj2zaTnpXydrA5fCMhqzhZEhFUNXm3s-ccoxF6xy5IpfWltr7635KuApWp0H8pIeg8-xVyG32RmoDu9Af7MM4YwH8zD-VYP_J7u9atM8YRQHnhhqxICIH7pMd-gR8RQO93AwQSDZGLBVOQzU3jKGhPof49Bn5OxiPQenfWqjEye5KAJCxvQbGoCLsmVOKMcLN2suJeekxkr8WErZdEJYhHFjsBwFZrofE4kHMPUmzZUwT2MbPcxkel79XJsnPAfFaVdPREjCU69PnlYVIbe4CiVmwzwAII1YANn8VCskCKsQ7TrbcX2g6QzJ1HQwtoagK2xN_LbFcGkWm1AgK6FAgYcCi9-CoB9EyJA7B-BAmJFUbwGQLS_nJM12p_BWAZHyNQfgVx-AKRwJNhSXl1j8HKOQfoMxhZjdayAJK5VcKwHoT6PrOLySUESHmPIBQfPmgtO1kEXWBCzZrPwKIaBVv8GphoOAt2LDzZgPMCMPEIDwFW1U_gZopRPZAL7BNogQCoaB1qK0kRQfg9i_wAF61iYdeqB8agkAi6aEq9oarjM6v8FoL6LIY22tmloBaYHlpZgzH4PIBQ8h5BAA`} __position={0} __code={'<CountDown target={new Date().getTime() + 3900000} />'} __scope={{props: this ? this.props : props,CountDown}}>\n    <CountDown target={new Date().getTime() + 3900000} />\n</Playground>\n           </MDXTag>\n  }\n}\n  "],"sourceRoot":""}